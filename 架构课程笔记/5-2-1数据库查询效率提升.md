## MySql数据库

### 1）数据结构

#### 1.1 二叉搜索树

树中节点的度不⼤于2的有序树 ，左⼦树的键值总数⼩于根的键值，右⼦树的键值总数⼤于根的键值。

#### 1.2 平衡二叉树

平衡⼆叉树（Balanced Binary Tree）⼜被称为AVL树，且具有以下性质：

它是⼀棵空树或它的左右两个子树的⾼度差的绝对值不超过1，并且左右两个⼦树都是⼀棵平衡⼆叉树。 

#### 1.3 红黑树

红⿊树是⼀种平衡⼆叉查找树的变体，它的左右⼦树⾼差有可能⼤于 1，所以红⿊树不是严格意义上的 平衡⼆叉树（AVL），但对之进⾏平衡的代价较低 。 

#### 1.4 B树

B-Tree是为了**磁盘或其它存储设备**而设计的⼀种多叉平衡查找树，相对于⼆叉树，B-Tree每个内节点有 多个分⽀，即多叉。 

B-Tree中的2个概念： 

度数：在树中，每个节点的⼦节点（⼦树）的个数就称为该节点的度（degree）。 

阶数：定义为⼀个节点的⼦节点数⽬的最⼤值。 

m阶B-Tree满⾜以下条件： 

* 每个节点最多拥有m个⼦树 
* 根节点⾄少有2个⼦树 
* 分⽀节点⾄少拥有m/2颗⼦树（除根节点和叶⼦节点外都是分⽀节点） 
* 所有叶⼦节点都在同⼀层、每个节点最多可以有m-1个key，并且以升序排列 
* 每个⾮叶⼦节点由m-1个key和m个指针组成，key和指针互相间隔，节点两端是指针 

![](./image/10.png)

B-Tree相对较⼆叉树的优势在于，⼀次读取⼀个磁盘块数据中包含了多个key数据，这样就可以在内存中 做⽐较操作，减少了磁盘IO的操作。

插⼊或者删除元素都会导致节点发⽣裂变反应，有时候会⾮常麻烦，但正因为如此才让B树能够始终保持 多路平衡，这也是B树⾃身的⼀个优势：⾃平衡； 

B树主要应⽤于⽂件系统以及部分数据库索引，如MongoDB，⼤部分关系型数据库索引则是使⽤B+树实 现。 

#### 1.5 B+树

这是⼀个3阶的B+Tree示意图： 

B+Tree是在B-Tree基础上的⼀种优化，使其更适合实现外存储索引结构，InnoDB存储引擎就是⽤ B+Tree实现其索引结构。 

B-Tree结构中可以看到每个节点中不仅包含数据的key值，还有data值。⽽每⼀个块的存储空间是有限 的，如果data数据较⼤时将会导致每个节点（即⼀个块）能存储的key的数量很⼩，当存储的数据量很⼤ 时同样会导致B-Tree的深度较⼤，增⼤查询时的磁盘I/O次数，进⽽影响查询效率。 

在B+Tree中，所有数据记录节点都是按照键值⼤⼩顺序存放在同⼀层的叶⼦节点上，⽽⾮叶⼦节点上只 存储key值信息，这样可以⼤⼤加⼤每个节点存储的key值数量，降低B+Tree的⾼度 。

B+Tree相对于B-Tree有⼏点不同： 

* ⾮叶⼦节点只存储键值信息。 
* 所有叶⼦节点之间都有⼀个链指针。
* 数据记录都存放在叶⼦节点中。 

 在B+Tree中，所有叶⼦节点（即数据节点）之间是⼀种链式环结构（双向）。因此可以对B+Tree进⾏两种查找运 算：⼀种是对于主键的**范围查找和分⻚查找**，另⼀种是从根节点开始，进⾏随机查找。